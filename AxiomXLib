--[[
    AxiomXLib v2.0 - Interface Moderna estilo RayField
    Sistema completo com tabs verticais e horizontais
    Design limpo e profissional
]]

-- Serviços
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Biblioteca principal
local AxiomXLib = {}

-- Configurações padrão
AxiomXLib.Settings = {
    Theme = "Dark",
    Watermark = "AxiomXLib v2.0",
    WatermarkVisible = true,
    Keybind = Enum.KeyCode.RightControl
}

-- Temas
AxiomXLib.Themes = {
    Dark = {
        MainFrame = Color3.fromRGB(25, 25, 25),
        TabFrame = Color3.fromRGB(30, 30, 30),
        ContentFrame = Color3.fromRGB(20, 20, 20),
        ElementFrame = Color3.fromRGB(35, 35, 35),
        Accent = Color3.fromRGB(0, 120, 215),
        TextColor = Color3.fromRGB(255, 255, 255),
        TextColor2 = Color3.fromRGB(200, 200, 200),
        Shadow = Color3.fromRGB(0, 0, 0)
    },
    Light = {
        MainFrame = Color3.fromRGB(240, 240, 240),
        TabFrame = Color3.fromRGB(230, 230, 230),
        ContentFrame = Color3.fromRGB(250, 250, 250),
        ElementFrame = Color3.fromRGB(220, 220, 220),
        Accent = Color3.fromRGB(0, 120, 215),
        TextColor = Color3.fromRGB(30, 30, 30),
        TextColor2 = Color3.fromRGB(80, 80, 80),
        Shadow = Color3.fromRGB(200, 200, 200)
    },
    Purple = {
        MainFrame = Color3.fromRGB(30, 25, 35),
        TabFrame = Color3.fromRGB(35, 30, 40),
        ContentFrame = Color3.fromRGB(25, 20, 30),
        ElementFrame = Color3.fromRGB(40, 35, 45),
        Accent = Color3.fromRGB(160, 0, 255),
        TextColor = Color3.fromRGB(255, 255, 255),
        TextColor2 = Color3.fromRGB(220, 220, 220),
        Shadow = Color3.fromRGB(15, 0, 25)
    }
}

-- Função para criar uma nova janela
function AxiomXLib:Window(options)
    options = options or {}
    
    -- Configurações da janela
    local Window = {
        Title = options.Name or "AxiomXLib Window",
        LoadingTitle = options.LoadingTitle or "Loading...",
        ConfigurationSaving = options.ConfigurationSaving or {},
        Discord = options.Discord or {},
        KeySystem = options.KeySystem or false,
        Key = options.Key or "",
        Root = nil,
        Tabs = {},
        CurrentTab = nil,
        Theme = AxiomXLib.Themes[AxiomXLib.Settings.Theme] or AxiomXLib.Themes.Dark
    }
    
    -- Criar interface
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "AxiomXLib"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
    
    if gethui then
        ScreenGui.Parent = gethui()
    elseif syn and syn.protect_gui then
        syn.protect_gui(ScreenGui)
        ScreenGui.Parent = game:GetService("CoreGui")
    else
        ScreenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
    end
    
    -- Frame principal
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 550, 0, 400)
    MainFrame.Position = UDim2.new(0.5, -275, 0.5, -200)
    MainFrame.BackgroundColor3 = Window.Theme.MainFrame
    MainFrame.BackgroundTransparency = 0.1
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.ClipsDescendants = true
    
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 8)
    UICorner.Parent = MainFrame
    
    local UIStroke = Instance.new("UIStroke")
    UIStroke.Color = Window.Theme.Accent
    UIStroke.Thickness = 1
    UIStroke.Transparency = 0.5
    UIStroke.Parent = MainFrame
    
    -- Sombra
    local Shadow = Instance.new("ImageLabel")
    Shadow.Name = "Shadow"
    Shadow.Size = UDim2.new(1, 24, 1, 24)
    Shadow.Position = UDim2.new(0, -12, 0, -12)
    Shadow.BackgroundTransparency = 1
    Shadow.Image = "rbxassetid://5554236805"
    Shadow.ImageColor3 = Window.Theme.Shadow
    Shadow.ImageTransparency = 0.8
    Shadow.ScaleType = Enum.ScaleType.Slice
    Shadow.SliceCenter = Rect.new(10, 10, 118, 118)
    Shadow.ZIndex = -1
    Shadow.Parent = MainFrame
    
    -- Top bar
    local TopBar = Instance.new("Frame")
    TopBar.Name = "TopBar"
    TopBar.Size = UDim2.new(1, 0, 0, 40)
    TopBar.BackgroundColor3 = Window.Theme.TabFrame
    TopBar.BorderSizePixel = 0
    
    local TopBarCorner = Instance.new("UICorner")
    TopBarCorner.CornerRadius = UDim.new(0, 8)
    TopBarCorner.Parent = TopBar
    
    -- Título
    local Title = Instance.new("TextLabel")
    Title.Name = "Title"
    Title.Size = UDim2.new(0.7, 0, 1, 0)
    Title.Position = UDim2.new(0, 15, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = Window.Title
    Title.TextColor3 = Window.Theme.TextColor
    Title.TextSize = 18
    Title.Font = Enum.Font.GothamSemibold
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = TopBar
    
    -- Botões da top bar
    local CloseButton = Instance.new("TextButton")
    CloseButton.Name = "CloseButton"
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(1, -35, 0.5, -15)
    CloseButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    CloseButton.BackgroundTransparency = 0.8
    CloseButton.Text = "×"
    CloseButton.TextColor3 = Window.Theme.TextColor
    CloseButton.TextSize = 20
    CloseButton.Font = Enum.Font.GothamBold
    CloseButton.AutoButtonColor = false
    
    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 6)
    CloseCorner.Parent = CloseButton
    
    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
    
    CloseButton.MouseEnter:Connect(function()
        TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundTransparency = 0.6}):Play()
    end)
    
    CloseButton.MouseLeave:Connect(function()
        TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundTransparency = 0.8}):Play()
    end)
    
    CloseButton.Parent = TopBar
    
    -- Container de tabs verticais
    local TabContainer = Instance.new("Frame")
    TabContainer.Name = "TabContainer"
    TabContainer.Size = UDim2.new(0, 180, 1, -50)
    TabContainer.Position = UDim2.new(0, 10, 0, 50)
    TabContainer.BackgroundTransparency = 1
    TabContainer.ClipsDescendants = true
    
    local TabListLayout = Instance.new("UIListLayout")
    TabListLayout.Padding = UDim.new(0, 5)
    TabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabListLayout.Parent = TabContainer
    
    -- Container de conteúdo
    local ContentContainer = Instance.new("Frame")
    ContentContainer.Name = "ContentContainer"
    ContentContainer.Size = UDim2.new(1, -200, 1, -60)
    ContentContainer.Position = UDim2.new(0, 190, 0, 50)
    ContentContainer.BackgroundTransparency = 1
    ContentContainer.ClipsDescendants = true
    
    local ContentScrolling = Instance.new("ScrollingFrame")
    ContentScrolling.Size = UDim2.new(1, 0, 1, 0)
    ContentScrolling.BackgroundTransparency = 1
    ContentScrolling.BorderSizePixel = 0
    ContentScrolling.ScrollBarThickness = 3
    ContentScrolling.ScrollBarImageColor3 = Window.Theme.Accent
    ContentScrolling.ScrollBarImageTransparency = 0.5
    ContentScrolling.AutomaticCanvasSize = Enum.AutomaticSize.Y
    ContentScrolling.CanvasSize = UDim2.new(0, 0, 0, 0)
    ContentScrolling.Parent = ContentContainer
    
    local ContentLayout = Instance.new("UIListLayout")
    ContentLayout.Padding = UDim.new(0, 10)
    ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ContentLayout.Parent = ContentScrolling
    
    -- Hierarquia
    TopBar.Parent = MainFrame
    TabContainer.Parent = MainFrame
    ContentContainer.Parent = MainFrame
    MainFrame.Parent = ScreenGui
    
    -- Watermark
    if AxiomXLib.Settings.WatermarkVisible then
        local Watermark = Instance.new("TextLabel")
        Watermark.Name = "Watermark"
        Watermark.Size = UDim2.new(0, 0, 0, 30)
        Watermark.Position = UDim2.new(1, -10, 0, 10)
        Watermark.AnchorPoint = Vector2.new(1, 0)
        Watermark.BackgroundColor3 = Window.Theme.TabFrame
        Watermark.BackgroundTransparency = 0.8
        Watermark.Text = AxiomXLib.Settings.Watermark
        Watermark.TextColor3 = Window.Theme.TextColor2
        Watermark.TextSize = 14
        Watermark.Font = Enum.Font.Gotham
        Watermark.TextXAlignment = Enum.TextXAlignment.Right
        
        local WatermarkCorner = Instance.new("UICorner")
        WatermarkCorner.CornerRadius = UDim.new(0, 6)
        WatermarkCorner.Parent = Watermark
        
        local WatermarkPadding = Instance.new("UIPadding")
        WatermarkPadding.PaddingRight = UDim.new(0, 10)
        WatermarkPadding.PaddingLeft = UDim.new(0, 10)
        WatermarkPadding.Parent = Watermark
        
        Watermark.Parent = ScreenGui
        
        -- Auto-size
        local textSize = TextService:GetTextSize(Watermark.Text, Watermark.TextSize, Watermark.Font, Vector2.new(1000, 30))
        Watermark.Size = UDim2.new(0, textSize.X + 20, 0, 30)
    end
    
    -- Sistema de drag
    local dragging = false
    local dragInput, dragStart, startPos
    
    TopBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    TopBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    -- Método para adicionar tab
    function Window:AddTab(options)
        options = options or {}
        
        local Tab = {
            Name = options.Name or "Tab",
            Icon = options.Icon or nil
        }
        
        -- Botão da tab
        local TabButton = Instance.new("TextButton")
        TabButton.Name = "TabButton_" .. Tab.Name
        TabButton.Size = UDim2.new(1, 0, 0, 40)
        TabButton.BackgroundColor3 = Window.Theme.TabFrame
        TabButton.BackgroundTransparency = 0.8
        TabButton.Text = ""
        TabButton.AutoButtonColor = false
        TabButton.LayoutOrder = #Window.Tabs + 1
        
        local TabCorner = Instance.new("UICorner")
        TabCorner.CornerRadius = UDim.new(0, 6)
        TabCorner.Parent = TabButton
        
        -- Conteúdo do botão
        local ButtonContent = Instance.new("Frame")
        ButtonContent.Size = UDim2.new(1, -20, 1, -10)
        ButtonContent.Position = UDim2.new(0, 10, 0, 5)
        ButtonContent.BackgroundTransparency = 1
        
        -- Ícone
        local IconLabel
        if Tab.Icon then
            IconLabel = Instance.new("ImageLabel")
            IconLabel.Size = UDim2.new(0, 20, 0, 20)
            IconLabel.Position = UDim2.new(0, 0, 0.5, -10)
            IconLabel.BackgroundTransparency = 1
            IconLabel.Image = Tab.Icon
            IconLabel.ImageColor3 = Window.Theme.TextColor2
            IconLabel.ImageTransparency = 0.3
            IconLabel.Parent = ButtonContent
        end
        
        -- Texto
        local TextLabel = Instance.new("TextLabel")
        TextLabel.Size = UDim2.new(1, Tab.Icon and -30 or -10, 1, 0)
        TextLabel.Position = UDim2.new(0, Tab.Icon and 30 or 10, 0, 0)
        TextLabel.BackgroundTransparency = 1
        TextLabel.Text = Tab.Name
        TextLabel.TextColor3 = Window.Theme.TextColor2
        TextLabel.TextSize = 14
        TextLabel.Font = Enum.Font.GothamSemibold
        TextLabel.TextXAlignment = Enum.TextXAlignment.Left
        TextLabel.TextYAlignment = Enum.TextYAlignment.Center
        TextLabel.TextTransparency = 0.3
        TextLabel.Parent = ButtonContent
        
        -- Indicador
        local Indicator = Instance.new("Frame")
        Indicator.Size = UDim2.new(0, 3, 0.6, 0)
        Indicator.Position = UDim2.new(0, -8, 0.2, 0)
        Indicator.BackgroundColor3 = Window.Theme.Accent
        Indicator.BackgroundTransparency = 0.7
        Indicator.Visible = false
        
        local IndicatorCorner = Instance.new("UICorner")
        IndicatorCorner.CornerRadius = UDim.new(1, 0)
        IndicatorCorner.Parent = Indicator
        
        -- Content frame
        local TabContent = Instance.new("Frame")
        TabContent.Name = "TabContent_" .. Tab.Name
        TabContent.Size = UDim2.new(1, -20, 1, -20)
        TabContent.Position = UDim2.new(0, 10, 0, 10)
        TabContent.BackgroundTransparency = 1
        TabContent.Visible = false
        
        local TabContentLayout = Instance.new("UIListLayout")
        TabContentLayout.Padding = UDim.new(0, 10)
        TabContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
        TabContentLayout.Parent = TabContent
        
        -- Eventos do botão
        TabButton.MouseButton1Click:Connect(function()
            Window:SelectTab(Tab)
        end)
        
        TabButton.MouseEnter:Connect(function()
            if not Tab.Active then
                TweenService:Create(TabButton, TweenInfo.new(0.2), {BackgroundTransparency = 0.6}):Play()
                TweenService:Create(TextLabel, TweenInfo.new(0.2), {TextTransparency = 0}):Play()
                if IconLabel then
                    TweenService:Create(IconLabel, TweenInfo.new(0.2), {ImageTransparency = 0}):Play()
                end
            end
        end)
        
        TabButton.MouseLeave:Connect(function()
            if not Tab.Active then
                TweenService:Create(TabButton, TweenInfo.new(0.2), {BackgroundTransparency = 0.8}):Play()
                TweenService:Create(TextLabel, TweenInfo.new(0.2), {TextTransparency = 0.3}):Play()
                if IconLabel then
                    TweenService:Create(IconLabel, TweenInfo.new(0.2), {ImageTransparency = 0.3}):Play()
                end
            end
        end)
        
        ButtonContent.Parent = TabButton
        Indicator.Parent = TabButton
        TabButton.Parent = TabContainer
        TabContent.Parent = ContentScrolling
        
        -- Configurar tab
        Tab.Button = TabButton
        Tab.TextLabel = TextLabel
        Tab.IconLabel = IconLabel
        Tab.Indicator = Indicator
        Tab.Content = TabContent
        Tab.Active = false
        Tab.Sections = {}
        
        -- Métodos da tab
        function Tab:AddSection(options)
            options = options or {}
            
            local Section = {
                Name = options.Name or "Section",
                Open = options.Open or true
            }
            
            -- Container da seção
            local SectionContainer = Instance.new("Frame")
            SectionContainer.Name = "Section_" .. Section.Name
            SectionContainer.Size = UDim2.new(1, 0, 0, 0)
            SectionContainer.BackgroundTransparency = 1
            SectionContainer.LayoutOrder = #Tab.Sections + 1
            
            -- Cabeçalho
            local Header = Instance.new("Frame")
            Header.Size = UDim2.new(1, 0, 0, 30)
            Header.BackgroundTransparency = 1
            
            local HeaderText = Instance.new("TextLabel")
            HeaderText.Size = UDim2.new(1, -10, 1, 0)
            HeaderText.Position = UDim2.new(0, 10, 0, 0)
            HeaderText.BackgroundTransparency = 1
            HeaderText.Text = string.upper(Section.Name)
            HeaderText.TextColor3 = Window.Theme.TextColor2
            HeaderText.TextSize = 12
            HeaderText.Font = Enum.Font.GothamBold
            HeaderText.TextXAlignment = Enum.TextXAlignment.Left
            HeaderText.TextTransparency = 0.5
            HeaderText.Parent = Header
            
            -- Divisor
            local Divider = Instance.new("Frame")
            Divider.Size = UDim2.new(1, 0, 0, 1)
            Divider.Position = UDim2.new(0, 0, 1, -1)
            Divider.BackgroundColor3 = Window.Theme.Accent
            Divider.BackgroundTransparency = 0.8
            Divider.Parent = Header
            
            -- Container de elementos
            local ElementsContainer = Instance.new("Frame")
            ElementsContainer.Size = UDim2.new(1, 0, 0, 0)
            ElementsContainer.Position = UDim2.new(0, 0, 0, 35)
            ElementsContainer.BackgroundTransparency = 1
            
            local ElementsLayout = Instance.new("UIListLayout")
            ElementsLayout.Padding = UDim.new(0, 8)
            ElementsLayout.SortOrder = Enum.SortOrder.LayoutOrder
            ElementsLayout.Parent = ElementsContainer
            
            -- Atualizar tamanho
            ElementsLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                ElementsContainer.Size = UDim2.new(1, 0, 0, ElementsLayout.AbsoluteContentSize.Y)
                SectionContainer.Size = UDim2.new(1, 0, 0, 35 + ElementsLayout.AbsoluteContentSize.Y)
            end)
            
            Header.Parent = SectionContainer
            ElementsContainer.Parent = SectionContainer
            SectionContainer.Parent = TabContent
            
            -- Métodos da seção
            function Section:AddButton(options)
                options = options or {}
                
                local Button = Instance.new("TextButton")
                Button.Size = UDim2.new(1, 0, 0, 35)
                Button.BackgroundColor3 = Window.Theme.ElementFrame
                Button.BackgroundTransparency = 0.8
                Button.Text = options.Text or "Button"
                Button.TextColor3 = Window.Theme.TextColor
                Button.TextSize = 14
                Button.Font = Enum.Font.GothamSemibold
                Button.AutoButtonColor = false
                
                local Corner = Instance.new("UICorner")
                Corner.CornerRadius = UDim.new(0, 6)
                Corner.Parent = Button
                
                local Stroke = Instance.new("UIStroke")
                Stroke.Color = Window.Theme.Accent
                Stroke.Thickness = 1
                Stroke.Transparency = 0.7
                Stroke.Parent = Button
                
                -- Efeitos
                Button.MouseEnter:Connect(function()
                    TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundTransparency = 0.6}):Play()
                    TweenService:Create(Stroke, TweenInfo.new(0.2), {Transparency = 0.5}):Play()
                end)
                
                Button.MouseLeave:Connect(function()
                    TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundTransparency = 0.8}):Play()
                    TweenService:Create(Stroke, TweenInfo.new(0.2), {Transparency = 0.7}):Play()
                end)
                
                -- Click
                Button.MouseButton1Click:Connect(function()
                    if options.Callback then
                        options.Callback()
                    end
                    
                    -- Efeito de ripple
                    local Ripple = Instance.new("Frame")
                    Ripple.Size = UDim2.new(0, 0, 0, 0)
                    Ripple.Position = UDim2.new(0.5, 0, 0.5, 0)
                    Ripple.AnchorPoint = Vector2.new(0.5, 0.5)
                    Ripple.BackgroundColor3 = Color3.new(1, 1, 1)
                    Ripple.BackgroundTransparency = 0.7
                    
                    local RippleCorner = Instance.new("UICorner")
                    RippleCorner.CornerRadius = UDim.new(1, 0)
                    RippleCorner.Parent = Ripple
                    
                    Ripple.Parent = Button
                    
                    TweenService:Create(Ripple, TweenInfo.new(0.5), {
                        Size = UDim2.new(2, 0, 2, 0),
                        BackgroundTransparency = 1
                    }):Play()
                    
                    game:GetService("Debris"):AddItem(Ripple, 0.5)
                end)
                
                Button.Parent = ElementsContainer
                
                return Button
            end
            
            function Section:AddLabel(options)
                options = options or {}
                
                local Label = Instance.new("TextLabel")
                Label.Size = UDim2.new(1, 0, 0, 25)
                Label.BackgroundTransparency = 1
                Label.Text = options.Text or "Label"
                Label.TextColor3 = Window.Theme.TextColor2
                Label.TextSize = 14
                Label.Font = Enum.Font.Gotham
                Label.TextXAlignment = Enum.TextXAlignment.Left
                Label.TextWrapped = true
                
                Label.Parent = ElementsContainer
                
                return Label
            end
            
            function Section:AddToggle(options)
                options = options or {}
                
                local Toggle = {
                    Value = options.Default or false
                }
                
                local ToggleFrame = Instance.new("Frame")
                ToggleFrame.Size = UDim2.new(1, 0, 0, 35)
                ToggleFrame.BackgroundTransparency = 1
                
                local ToggleButton = Instance.new("TextButton")
                ToggleButton.Size = UDim2.new(1, 0, 1, 0)
                ToggleButton.BackgroundTransparency = 1
                ToggleButton.Text = ""
                ToggleButton.AutoButtonColor = false
                
                local ToggleText = Instance.new("TextLabel")
                ToggleText.Size = UDim2.new(0.7, 0, 1, 0)
                ToggleText.Position = UDim2.new(0, 10, 0, 0)
                ToggleText.BackgroundTransparency = 1
                ToggleText.Text = options.Text or "Toggle"
                ToggleText.TextColor3 = Window.Theme.TextColor
                ToggleText.TextSize = 14
                ToggleText.Font = Enum.Font.GothamSemibold
                ToggleText.TextXAlignment = Enum.TextXAlignment.Left
                ToggleText.TextYAlignment = Enum.TextYAlignment.Center
                ToggleText.Parent = ToggleFrame
                
                local ToggleBox = Instance.new("Frame")
                ToggleBox.Size = UDim2.new(0, 24, 0, 24)
                ToggleBox.Position = UDim2.new(1, -34, 0.5, -12)
                ToggleBox.AnchorPoint = Vector2.new(1, 0.5)
                ToggleBox.BackgroundColor3 = Window.Theme.ElementFrame
                ToggleBox.BackgroundTransparency = 0.8
                
                local BoxCorner = Instance.new("UICorner")
                BoxCorner.CornerRadius = UDim.new(0, 4)
                BoxCorner.Parent = ToggleBox
                
                local BoxStroke = Instance.new("UIStroke")
                BoxStroke.Color = Window.Theme.Accent
                BoxStroke.Thickness = 1
                BoxStroke.Transparency = 0.5
                BoxStroke.Parent = ToggleBox
                
                local ToggleDot = Instance.new("Frame")
                ToggleDot.Size = UDim2.new(0, 16, 0, 16)
                ToggleDot.Position = UDim2.new(0.5, -8, 0.5, -8)
                ToggleDot.AnchorPoint = Vector2.new(0.5, 0.5)
                ToggleDot.BackgroundColor3 = Window.Theme.Accent
                ToggleDot.BackgroundTransparency = 0.3
                
                local DotCorner = Instance.new("UICorner")
                DotCorner.CornerRadius = UDim.new(0, 4)
                DotCorner.Parent = ToggleDot
                
                if not Toggle.Value then
                    ToggleDot.BackgroundTransparency = 1
                end
                
                ToggleDot.Parent = ToggleBox
                ToggleBox.Parent = ToggleFrame
                ToggleButton.Parent = ToggleFrame
                ToggleFrame.Parent = ElementsContainer
                
                -- Eventos
                ToggleButton.MouseButton1Click:Connect(function()
                    Toggle.Value = not Toggle.Value
                    
                    if Toggle.Value then
                        TweenService:Create(ToggleDot, TweenInfo.new(0.2), {BackgroundTransparency = 0.3}):Play()
                        TweenService:Create(ToggleBox, TweenInfo.new(0.2), {BackgroundColor3 = Window.Theme.Accent}):Play()
                    else
                        TweenService:Create(ToggleDot, TweenInfo.new(0.2), {BackgroundTransparency = 1}):Play()
                        TweenService:Create(ToggleBox, TweenInfo.new(0.2), {BackgroundColor3 = Window.Theme.ElementFrame}):Play()
                    end
                    
                    if options.Callback then
                        options.Callback(Toggle.Value)
                    end
                end)
                
                ToggleButton.MouseEnter:Connect(function()
                    TweenService:Create(ToggleBox, TweenInfo.new(0.2), {BackgroundTransparency = 0.6}):Play()
                end)
                
                ToggleButton.MouseLeave:Connect(function()
                    TweenService:Create(ToggleBox, TweenInfo.new(0.2), {BackgroundTransparency = 0.8}):Play()
                end)
                
                return Toggle
            end
            
            table.insert(Tab.Sections, Section)
            
            return Section
        end
        
        table.insert(Window.Tabs, Tab)
        
        -- Selecionar primeira tab
        if #Window.Tabs == 1 then
            Window:SelectTab(Tab)
        end
        
        return Tab
    end
    
    -- Método para selecionar tab
    function Window:SelectTab(tab)
        if Window.CurrentTab then
            Window.CurrentTab.Active = false
            TweenService:Create(Window.CurrentTab.Button, TweenInfo.new(0.2), {BackgroundTransparency = 0.8}):Play()
            TweenService:Create(Window.CurrentTab.TextLabel, TweenInfo.new(0.2), {TextTransparency = 0.3}):Play()
            if Window.CurrentTab.IconLabel then
                TweenService:Create(Window.CurrentTab.IconLabel, TweenInfo.new(0.2), {ImageTransparency = 0.3}):Play()
            end
            Window.CurrentTab.Indicator.Visible = false
            Window.CurrentTab.Content.Visible = false
        end
        
        Window.CurrentTab = tab
        tab.Active = true
        
        TweenService:Create(tab.Button, TweenInfo.new(0.2), {BackgroundTransparency = 0.4}):Play()
        TweenService:Create(tab.TextLabel, TweenInfo.new(0.2), {TextTransparency = 0}):Play()
        if tab.IconLabel then
            TweenService:Create(tab.IconLabel, TweenInfo.new(0.2), {ImageTransparency = 0}):Play()
        end
        tab.Indicator.Visible = true
        tab.Content.Visible = true
    end
    
    -- Método para mostrar/ocultar
    function Window:Toggle()
        MainFrame.Visible = not MainFrame.Visible
    end
    
    -- Método para destruir
    function Window:Destroy()
        ScreenGui:Destroy()
    end
    
    -- Retornar a janela
    Window.Root = ScreenGui
    return Window
end

-- Função para mudar tema
function AxiomXLib:SetTheme(themeName)
    if self.Themes[themeName] then
        self.Settings.Theme = themeName
        return true
    end
    return false
end

-- Retornar a biblioteca
return AxiomXLib
